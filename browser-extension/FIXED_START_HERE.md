# ✅ 问题已修复！现在可以安装了

## 🐛 刚才的问题

错误信息：`Could not load icon 'icons/icon-16.png'`

**原因**：之前只创建了 SVG 图标，但 Chrome 需要 PNG 格式

**解决**：已自动创建所有 PNG 图标 ✅

---

## 🚀 现在开始安装（3步）

### 步骤 1: 安装插件

1. 打开 Chrome 浏览器，地址栏输入：
   ```
   chrome://extensions/
   ```

2. **开启右上角的"开发者模式"**（开关打开）

3. 点击左上角的 **"加载已解压的扩展程序"**

4. 选择文件夹：
   ```
   /Users/a/sparkit/browser-extension
   ```

5. ✅ 成功！工具栏会出现紫色的 Sparkit 图标（白色 S 字母）

---

### 步骤 2: 登录并创建角色

1. **点击插件图标**（工具栏的紫色 S）

2. 在弹窗中点击 **"打开 Sparkit 网站"**

3. 访问 **https://sparkiai.com** 并登录

4. 进入 **"角色管理"** → 点击 **"创建角色"**

5. **上传角色图片**：
   - `char_avatar` - 角色头像（必需）
   - `char_image` - 角色全身照（推荐）

6. 输入角色名称，点击保存

---

### 步骤 3: 测试 Mimic 功能

#### 🧪 方式 1：快速测试（推荐）

在浏览器打开测试页面：
```
file:///Users/a/sparkit/browser-extension/test.html
```

或者直接拖拽 `test.html` 文件到 Chrome

- 鼠标悬停任意图片
- 右下角出现紫色 "Mimic" 按钮 ✅
- 点击按钮测试完整功能

#### 🌐 方式 2：真实网站

访问以下网站测试：
- **Pinterest**: https://www.pinterest.com
- **Instagram**: https://www.instagram.com
- 或任何有图片的网站

操作：
1. 鼠标悬停在图片上
2. 右下角出现 "Mimic" 按钮
3. 点击 → 选择角色 → 生成

---

## 🎯 完整使用流程

```
悬停图片 
  ↓
看到 Mimic 按钮
  ↓
点击按钮
  ↓
选择角色（会记住你的选择）
  ↓
勾选"保留参考图背景"（推荐）
  ↓
点击"生成 (2张)"
  ↓
等待 30-60 秒
  - 反推提示词
  - 去除人物（如保留背景）
  - 生成最终图片
  ↓
查看 2 张生成的图片
  ↓
下载或在 Sparkit 网站查看
```

---

## ⚠️ 重要：首次使用前

**必须重启 Sparkit 服务器**（让 CORS 配置生效）：

```bash
cd /Users/a/sparkit

# 如果服务器在运行，按 Ctrl+C 停止

# 重新启动
npm run dev
```

---

## ✅ 检查插件状态

点击插件图标（紫色 S），弹窗应该显示：

```
✅ API 状态: 已连接
✅ 登录状态: 已登录
✅ 用户: your-email@example.com
```

如果显示"未连接"或"未登录"：
1. 确保 Sparkit 服务器正在运行
2. 访问 sparkiai.com 登录
3. 刷新插件（在扩展程序页面点击刷新）

---

## 🎨 使用技巧

### 什么样的图片效果最好？
- ✅ 单人照片，人物清晰
- ✅ 姿势明显，光线良好
- ✅ 构图完整，没有被裁切
- ✅ 图片尺寸 > 100x100 像素

### 保留背景 vs 不保留？

**✅ 保留背景**（推荐）：
- 完全复刻参考图的场景
- 保留环境、光线、氛围
- 你的角色自然融入场景

**❌ 不保留背景**：
- AI 自由发挥背景
- 更多创意变化
- 可能与原图不同

---

## 🐛 常见问题

### Q: 按钮不显示？
**A**: 
- 确认图片 > 100x100 像素
- 检查是否已登录（点击插件图标）
- 刷新页面重试

### Q: 显示"未连接"？
**A**:
- 确认 Sparkit 服务器在运行
- 访问 https://sparkiai.com 测试
- 查看浏览器控制台错误

### Q: 生成失败？
**A**:
- "未选择角色" → 先创建并选择角色
- "安全过滤" → 换一张参考图
- "网络错误" → 等待几秒重试

---

## 🎉 搞定！

现在你可以：
1. ✅ 在任何网站使用 Mimic
2. ✅ 快速替换图片中的角色
3. ✅ 批量生成创意内容

**享受 AI 创作的乐趣吧！** 🚀✨

---

## 📚 更多帮助

- **快速开始**: GET_STARTED.md
- **详细教程**: QUICKSTART.md
- **故障排除**: INSTALL.md
- **测试工具**: bash test.sh

---

_更新时间: 2024-11-23_  
_状态: ✅ PNG 图标已创建，可以安装_

